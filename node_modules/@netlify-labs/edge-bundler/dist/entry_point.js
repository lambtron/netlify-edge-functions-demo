import { pathToFileURL } from 'url';
import { getBootstrapImport } from './bootstrap.js';
const generateEntryPoint = (functions) => {
    const lines = functions.map((func, index) => generateFunctionReference(func, index));
    const bootImport = getBootstrapImport();
    const importLines = lines.map(({ importLine }) => importLine).join('\n');
    const exportLines = lines.map(({ exportLine }) => exportLine).join(', ');
    const exportDeclaration = `const functions = {${exportLines}};`;
    const defaultExport = 'boot(functions);';
    return [bootImport, importLines, exportDeclaration, defaultExport].join('\n\n');
};
const generateFunctionReference = (func, index) => {
    const importName = `func${index}`;
    const exportLine = `"${func.name}": ${importName}`;
    const url = pathToFileURL(func.path);
    return {
        exportLine,
        importLine: `import ${importName} from "${url}";`,
    };
};
export { generateEntryPoint };
